<mat-card>
  <mat-toolbar color="accent">
    <h1>
      <i *ngIf="beast.patreon >= 20" matTooltip="Early Access" class="fas fa-dice-d20 icon-white"></i>
      <i *ngIf="beast.patreon >= 2 && beast.patreon < 20" matTooltip="Advanced" class="fas fa-plus icon-white"></i>
      {{beast.name | uppercase}}
    </h1>
    <div>
      <h1>HR: {{beast.hr}} <i (click)="openExplaination()" class="fas fa-question-circle icon-white icon-small"></i>
      </h1>
    </div>
  </mat-toolbar>

  <div class="content-shell">

    <div class="left">
      <div>
        <img *ngIf="beast.id" [src]="imageBase + beast.id" [alt]="beast.name">
        <img *ngIf="!beast.id" src="../../../../assets/imageNotFound.png" alt="Not Found">
      </div>

      <div class="conflict-shell" *ngIf="beast.conflict.length > 0">
        <h2>Social Characteristics</h2>
        <div class="divider"></div>
        <div *ngFor="let trait of beast.conflict; let i = index">
          <div class="flex-row-opposite">
            <h3>{{trait.trait}}</h3>
            <h3>{{trait.value}}</h3>
          </div>
        </div>
      </div>

      <div class="conflict-shell" *ngIf="beast.skills.length > 0">
        <h2>Special Skills</h2>
        <div class="divider"></div>
        <div *ngFor="let skill of beast.skills; let i = index">
          <div class="flex-row-opposite">
            <h3>{{skill.skill}}</h3>
            <h3>{{skill.rank}}</h3>
          </div>
        </div>
      </div>

      <div class="combat-shell" *ngIf="beast.combat.length > 0">
        <h2>Weapons</h2>
        <div class="divider"></div>
        <div *ngFor="let square of beast.combat">
          <h3 class="weaponName">{{square.weapon | titlecase}}</h3>
          <div class="square-shell">
            <img class="combat-image" src="../../../../assets/square.png" alt="combat square">
            <p class="spd">{{square.spd}}</p>
            <p class="atk">{{square.atk}}</p>
            <p class="init">{{square.init}}</p>
            <p class="def">{{square.def}}</p>
            <p class="encumb">{{square.encumb}}</p>
            <div class="dr">
              <p>{{square.dr}}</p>
              <p class="shield_dr" *ngIf='square.shield_dr && square.shield_dr !== " "'>{{square.shield_dr}}</p>
            </div>
            <p class="measure">{{square.measure}}</p>
            <p class="damage">{{square.damage}}</p>
            <p class="parry">{{square.parry}}</p>
          </div>
        </div>
      </div>

      <div class="vitals-shell">
        <div class="flex-row-opposite">
          <h3>Vitality</h3>
          <p>{{beast.vitality}}</p>
        </div>
        <div class="flex-row-opposite">
          <h3>Panic</h3>
          <p>{{beast.panic | moraleConverter}}</p>
        </div>
        <div class="flex-row-opposite">
          <h3>Broken</h3>
          <p>{{beast.broken | moraleConverter}}</p>
        </div>
        <!-- Custom pipes for the above should work -->
      </div>

      <div class="vitals-shell">
        <h3 class="blue">Movement</h3>
        <div *ngFor="let movementType of beast.movement">
          <div class="divider white"></div>
          <h3>{{movementType.type | titlecase}}</h3>
          <div class="divider white"></div>
          <div class="flex-row-opposite">
            <h3>Stroll/Crawl</h3>
            <p>{{movementType.stroll}}</p>
          </div>
          <div class="flex-row-opposite">
            <h3>Walk</h3>
            <p>{{movementType.walk}}</p>
          </div>
          <div class="flex-row-opposite">
            <h3>Jog</h3>
            <p>{{movementType.jog}}</p>
          </div>
          <div class="flex-row-opposite">
            <h3>Run</h3>
            <p>{{movementType.run}}</p>
          </div>
          <div class="flex-row-opposite">
            <h3>Sprint</h3>
            <p>{{movementType.sprint}}</p>
          </div>
        </div>
      </div>

      <h2>Special Attacks</h2>
      <div class="divider"></div>
      <div>
        <quill-view-html [content]="beast.sp_atk"></quill-view-html>
      </div>

      <h2>Special Defenses</h2>
      <div class="divider"></div>
      <div>
        <quill-view-html [content]="beast.sp_def"></quill-view-html>
      </div>

      <h2>Tactics</h2>
      <div class="divider"></div>
      <div>
        <quill-view-html [content]="beast.tactics"></quill-view-html>
      </div>
    </div>

    <div class="right">
      <div>
        <quill-view-html [content]="beast.intro"></quill-view-html>
      </div>

      <h2>Habitat/Society</h2>
      <div class="divider"></div>
      <div>
        <quill-view-html [content]="beast.habitat"></quill-view-html>
      </div>

      <h2>Ecology</h2>
      <div class="divider"></div>
      <div>
        <quill-view-html [content]="beast.ecology"></quill-view-html>
      </div>

      <h2>Types</h2>
      <div class="divider"></div>
      <div class="box-padding">
        <mat-accordion>
          <mat-expansion-panel *ngFor="let type of beast.types">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>{{type.typeid | typeConverter}}</h3>
              </mat-panel-title>
            </mat-expansion-panel-header>

            <quill-view-html [content]="type.description"></quill-view-html>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
      <!-- list of types that link to search with that type as a parameter -->

      <h2>Misc Information</h2>
      <div class="divider"></div>
      <div class="box-padding">
        <div class="flex-row-opposite">
          <h3>Size</h3>
          <p>{{beast.size}}</p>
        </div>
        <div class="flex-row-opposite">
          <h3>Int</h3>
          <p>{{beast.int}}</p>
        </div>
        <h3>Environment</h3>
        <div class="chip-shell">
          <mat-chip-list>
            <mat-chip *ngFor="let environ of beast.environ" color="primary" selected>
              {{environ.environid | environConverter}}</mat-chip>
          </mat-chip-list>
        </div>
        <div class="flex-row-opposite">
          <h3>Number Appearing</h3>
          <p>{{beast.number_min}} - {{beast.number_max}}</p>
        </div>
        <div class="flex-row-opposite">
          <h3>Senses</h3>
          <p>{{beast.senses}}</p>
        </div>
        <div class="flex-row-opposite">
          <h3>Diet</h3>
          <p>{{beast.diet}}</p>
        </div>
        <div class="flex-row-opposite">
          <h3>Subsystem Focus</h3>
          <p>{{beast.subsystem | subsystemConverter}}</p>
        </div>
      </div>

      <h2>Variants</h2>
      <div class="divider"></div>
      <div *ngIf="beast.varients.length > 0" class="chip-shell">
        <mat-chip-list>
          <mat-chip *ngFor="let varient of beast.varients" color="accent" selected>
            {{varient.name}}</mat-chip>
        </mat-chip-list>
      </div>
      <div class="box-padding">
        <h3 *ngIf="beast.varients.length == 0">This creature currently has no varients</h3>
      </div>

      <!-- <h2>Special Harvest</h2> -->

      <h2>Meta Notes</h2>
      <div class="divider"></div>
      <div>
        <quill-view-html [content]="beast.meta"></quill-view-html>
      </div>

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <h3>Personal Notes</h3>
          </mat-panel-title>
        </mat-expansion-panel-header>

        <app-player-notes class="gm-notes-shell" [notes]="beast.notes" [id]="beast.id"></app-player-notes>

      </mat-expansion-panel>
    </div>
  </div>

  <button *ngIf="loggedIn === 'owner'" mat-raised-button color="warn"
    [routerLink]="['/main/beast', beast.id, 'edit']">Edit</button>
</mat-card>