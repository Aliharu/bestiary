<mat-card>
  <div class="point-shell">
    <h4>Points</h4>
    <h5>Combat</h5>
    <p>{{selectedRoleId && beast.roleInfo[selectedRoleId] ? beast.roleInfo[selectedRoleId].combatpoints :
      beast.combatpoints}}</p>

    <h5>Confrontation</h5>
    <p>{{selectedRoleId && beast.roleInfo[selectedRoleId] ? beast.roleInfo[selectedRoleId].socialpoints :
      beast.socialpoints}}</p>

    <h5>Skills</h5>
    <p>{{selectedRoleId && beast.roleInfo[selectedRoleId] ? beast.roleInfo[selectedRoleId].skillpoints :
      beast.skillpoints}}</p>
  </div>
  <div class="explaination-shell">
    <p>For each category:</p>
    <p>Put 2 points in green before putting 1 point in white</p>
    <p>Put 2 points in white before putting 1 point in red </p>
  </div>

  <mat-toolbar color="warn" class="top-toolbar">
    <h1>
      <mat-form-field>
        <input matInput [value]="beast.name" (change)="captureInput($event, 'name')" placeholder="Name">
      </mat-form-field>
      <mat-form-field>
        <input matInput [value]="beast.plural" (change)="captureInput($event, 'plural')" placeholder="Pluralized Name">
      </mat-form-field>
    </h1>
    <div>
      <mat-form-field>
        <mat-label>Patreon Level</mat-label>
        <mat-select [value]="beast.patreon" (selectionChange)="captureSelect($event, 'patreon')">
          <mat-option value="0">
            Basic
          </mat-option>
          <mat-option value="3">
            Deluxe
          </mat-option>
          <mat-option value="20">
            Early Access
          </mat-option>
        </mat-select>
        <p>{{beast.patreon}}</p>
      </mat-form-field>
    </div>
  </mat-toolbar>

  <div class="content-shell">
    <div class="left">
      <div>
        <img *ngIf="beast.id" [src]="imageUrl" [alt]="beast.name"
          onerror="this.onerror=null;this.src='/assets/404.png';">
      </div>

      <div class="margin-spacing" *ngIf="beast.id">
        <input (change)="onImagePicked($event)" placeholder="Upload Image" type="file" />
        <button mat-button-raised color="accent" (click)="onImageUpload()">Upload Image</button>
      </div>
      <br>
      <div class="thumbnailShell" *ngIf="beast.id">
        <mat-form-field>
          <mat-label>Thumbnail Position</mat-label>
          <mat-select [(value)]="beast.thumbnail" (selectionChange)="captureSelect($event, 'thumbnail')">
            <mat-option value="top left">
              top left
            </mat-option>
            <mat-option value="top center">
              top center
            </mat-option>
            <mat-option value="top right">
              top right
            </mat-option>
            <mat-option value="center left">
              center left
            </mat-option>
            <mat-option value="center center">
              center center
            </mat-option>
            <mat-option value="center right">
              center right
            </mat-option>
            <mat-option value="bottom left">
              bottom left
            </mat-option>
            <mat-option value="bottom center">
              bottom center
            </mat-option>
            <mat-option value="bottom right">
              bottom right
            </mat-option>
          </mat-select>
        </mat-form-field>

        <div>
          <h3>Preview</h3>
          <img class="preview" [ngStyle]="{'object-position': beast.thumbnail ? beast.thumbnail : 'top'}"
            *ngIf="beast.id" [src]="imageUrl" [alt]="beast.name">
        </div>
      </div>

      <div *ngIf="beast.id">
        <p>Artist: {{beast.artistInfo.artist}}</p>
        <mat-form-field>
          <mat-label>Select Artist</mat-label>
          <mat-select (selectionChange)="setArtist($event)">
            <mat-option *ngFor="let artist of beast.artistInfo.allartists" [value]="artist">
              {{artist.artist}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <mat-accordion *ngIf="beast.id">
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <h3>Add a New Artist</h3>
            </mat-panel-title>
          </mat-expansion-panel-header>

          <div class="new-roll-shell">
            <mat-form-field>
              <input #artistName placeholder="Artist Name" matInput (change)="captureNewArtist('artist', $event)">
            </mat-form-field>

            <mat-form-field>
              <input #artistLink placeholder="Link" matInput (change)="captureNewArtist('link', $event)">
            </mat-form-field>

            <mat-form-field>
              <textarea #artistTooltip placeholder="Tooltop" matInput
                (change)="captureNewArtist('tooltip', $event)"></textarea>
            </mat-form-field>
            <button mat-raised-button (click)="addNewArtist()" color="accent">Add Artist</button>
          </div>

        </mat-expansion-panel>
      </mat-accordion>

      <div class="margin-spacing" *ngIf="!beast.id">
        <h3>You need to save this monster before uploading an image</h3>
      </div>
    </div>

    <div class="right">
      <h2>Introduction</h2>
      <div class="divider"></div>
      <div>
        <quill-editor [(ngModel)]="beast.intro" (onContentChanged)="captureHTML($event, 'intro')"></quill-editor>
      </div>

      <h2>Appearance</h2>
      <div class="divider"></div>
      <div>
        <quill-editor [(ngModel)]="beast.ecology" (onContentChanged)="captureHTML($event, 'ecology')"></quill-editor>
      </div>

      <h2>Common Folklore</h2>
      <div class="divider"></div>
      <div>
        <div *ngFor="let lore of beast.folklore; let i = index" class="belief-display">
          <mat-form-field>
            <input matInput placeholder="Belief" [value]="lore.belief" max="500"
              (change)="captureFolklore('belief', i, $event)">
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Truth" [value]="lore.truth" max="500"
              (change)="captureFolklore('truth', i, $event)">
          </mat-form-field>
          <i (click)="deleteFolkloreEntry(i)" class="fa-solid fa-trash"></i>
        </div>
        <div class="belief-display">
          <mat-form-field>
            <input matInput placeholder="Belief" [value]="folklore.belief" max="500"
              (change)="captureNewFolklore('belief', $event)">
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Truth" [value]="folklore.truth" max="500"
              (change)="captureNewFolklore('truth', $event)">
          </mat-form-field>
        </div>
      </div>

      <h2>Habitat/Society</h2>
      <div class="divider"></div>
      <div>
        <quill-editor [(ngModel)]="beast.habitat" (onContentChanged)="captureHTML($event, 'habitat')"></quill-editor>
      </div>
    </div>
  </div>

  <div class="combat-role-shell">
    <div class="conflict-shell unset-width flex-opposite" *ngIf="beast.roles.length > 0">
      <mat-form-field class="select-width">
        <mat-label>Select Role</mat-label>
        <mat-select (selectionChange)="setRole($event)" [(value)]="selectedRoleId">
          <mat-option *ngFor="let role of beast.roles" [value]="role.id">
            {{role.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <p [innerHTML]="displayName(selectedRoleId)"></p>
      <section>
        <mat-checkbox [matTooltipDisabled]="!(selectedRoleId === beast.defaultrole)"
          [disabled]="selectedRoleId === beast.defaultrole" matTooltip="To set a new default, go to another Role"
          [checked]="selectedRoleId === beast.defaultrole" (change)="updateDefaultRole()">Default Role
        </mat-checkbox>
      </section>
    </div>

    <div *ngIf="selectedRoleId" class="flex-row-opposite">
      <mat-form-field>
        <input matInput placeholder="Change Role Name" [value]="beast.roleInfo[selectedRoleId].name"
          (change)="captureRoleName($event)">
      </mat-form-field>

      <button mat-raised-button (click)="deleteRole()" color="warn">Delete Role</button>
    </div>

    <mat-accordion>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <h3>Add a New Role</h3>
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="new-roll-shell">
          <p *ngIf="beast.roles.length === 0" class="warning">This role will be your default. All Skills,
            Characteristics, and Combat Info that you've filled out already will be transferred to this new role</p>

          <mat-form-field>
            <input #newRoleName placeholder="Role Name" matInput (change)="captureNewRole('name', $event)">
          </mat-form-field>

          <mat-form-field>
            <mat-label>Combat Role Type</mat-label>
            <mat-select #newCombatRoleSelect (selectionChange)="captureNewRole('role', $event)"
              [disabled]="beast.roles.length === 0 && beast.role"
              [value]="beast.roles.length === 0 ? beast.role : null">
              <mat-option>
                None
              </mat-option>
              <mat-option *ngFor="let role of objectKeys(combatRolesInfo)" [value]="role">
                {{role}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="secondary-role-margin">
            <mat-label>Combat Secondary Role Type</mat-label>
            <mat-select #newSecondaryRoleSelect (selectionChange)="captureNewRole('secondaryrole', $event)"
              [disabled]="beast.roles.length === 0 && beast.secondaryrole"
              [value]="beast.roles.length === 0 ? beast.secondaryrole : null">
              <mat-option>
                None
              </mat-option>
              <mat-option *ngFor="let role of objectKeys(combatRolesSecondaryInfo)" [value]="role">
                {{role}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Confrontation Role Type</mat-label>
            <mat-select #newConfRoleSelect (selectionChange)="captureNewRole('socialrole', $event)"
              [disabled]="beast.roles.length === 0 && beast.socialrole"
              [value]="beast.roles.length === 0 ? beast.socialrole : null">
              <mat-option>
                None
              </mat-option>
              <mat-option *ngFor="let role of objectKeys(socialRolesInfo)" [value]="role">
                {{role}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="secondary-role-margin">
            <mat-label>Confrontation Secondary Role Type</mat-label>
            <mat-select #newSecondaryConfRoleSelect (selectionChange)="captureNewRole('socialsecondary', $event)"
              [disabled]="beast.roles.length === 0 && beast.socialsecondary"
              [value]="beast.roles.length === 0 ? beast.socialsecondary : null">
              <mat-option>
                None
              </mat-option>
              <mat-option *ngFor="let role of objectKeys(socialRolesSecondaryInfo)" [value]="role">
                {{role}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Skill Role Type</mat-label>
            <mat-select #newSkillRoleSelect (selectionChange)="captureNewRole('skillrole', $event)"
              [disabled]="beast.roles.length === 0 && beast.skillrole"
              [value]="beast.roles.length === 0 ? beast.skillrole : null">
              <mat-option>
                None
              </mat-option>
              <mat-option *ngFor="let role of objectKeys(skillRolesInfo)" [value]="role">
                {{role}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <button mat-raised-button (click)="addNewRole()" color="accent"
            [disabled]="!(((newRole.role || newRole.socialrole || newRole.skillrole) || ((beast.role || beast.socialrole || beast.skillrole) && beast.roles.length === 0)) && newRole.name)">Add
            Role</button>
        </div>

      </mat-expansion-panel>
    </mat-accordion>

    <br>
  </div>

  <div class="attack-and-defense-shell">
    <div class="attack-and-defense-inner-shell">
      <h2>Add. Attack Info</h2>
      <div class="divider"></div>
      <br>
      <h3 *ngIf="selectedRoleId">Base Abilities</h3>
      <div>
        <quill-editor [(ngModel)]="beast.sp_atk" (onContentChanged)="captureHTML($event, 'sp_atk')"></quill-editor>
      </div>

      <div *ngIf="selectedRoleId">
        <br>
        <h3>Role-Specific Abilities</h3>
        <div>
          <quill-editor [(ngModel)]="beast.roleInfo[selectedRoleId].attack"
            (onContentChanged)="captureHTML($event, 'role attack')"></quill-editor>
        </div>
      </div>
    </div>
    <div class="attack-and-defense-inner-shell">
      <h2>Add. Defense Info</h2>
      <div class="divider"></div>
      <br>
      <h3 *ngIf="selectedRoleId">Base Abilities</h3>
      <div>
        <quill-editor [(ngModel)]="beast.sp_def" (onContentChanged)="captureHTML($event, 'sp_def')"></quill-editor>
      </div>

      <div *ngIf="selectedRoleId">
        <br>
        <h3>Role-Specific Abilities</h3>
        <div>
          <quill-editor [(ngModel)]="beast.roleInfo[selectedRoleId].defense"
            (onContentChanged)="captureHTML($event, 'role defense')"></quill-editor>
        </div>
      </div>
    </div>

  </div>

  <br>

  <h2>Tactics & Strategy</h2>
  <div class="divider"></div>
  <div>
    <quill-editor [(ngModel)]="beast.tactics" (onContentChanged)="captureHTML($event, 'tactics')">
    </quill-editor>
  </div>

  <br>

  <mat-tab-group backgroundColor="warn">
    <mat-tab label="Confrontations">
      <div class="tab-wrapper">
        <div>
          <mat-form-field>
            <mat-label>Change Role Type</mat-label>
            <mat-select
              [(value)]="selectedRoleId && beast.roleInfo[selectedRoleId].socialrole ? beast.roleInfo[selectedRoleId].socialrole : selectedRoleId ? null : beast.socialrole"
              (selectionChange)="setSocialRoleType($event)">
              <mat-option>
                No Role
              </mat-option>
              <mat-option *ngFor="let role of objectKeys(socialRolesInfo)" [value]="role">
                {{role}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Change Secondary Role Type</mat-label>
            <mat-select [(value)]="selectedRoleId && beast.roleInfo[selectedRoleId] && beast.roleInfo[selectedRoleId].socialsecondary ?
            beast.roleInfo[selectedRoleId].socialsecondary :
            selectedRoleId ? null : beast.socialsecondary" (selectionChange)="setSocialSecondaryRoleType($event)">
              <mat-option>
                None
              </mat-option>
              <mat-option *ngFor="let role of objectKeys(socialRolesSecondaryInfo)" [value]="role">
                {{role}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div *ngIf="selectedSocialRole && selectedSocialRole.description">
          <p><strong>Description: </strong> {{selectedSocialRole.description}}</p>
        </div>

        <div *ngIf="selectedRoleId && beast.roleInfo[selectedRoleId].socialsecondary">
          <p class="top-margin"><strong>Secondary Description: </strong>
            {{socialRolesSecondaryInfo[beast.roleInfo[selectedRoleId].socialsecondary].description}}</p>
        </div>
        <div *ngIf="!selectedRoleId && beast.socialsecondary">
          <p class="top-margin"><strong>Secondary Description: </strong>
            {{socialRolesSecondaryInfo[beast.socialsecondary].description}}</p>
        </div>

        <div>
          <h2>Descriptions</h2>
          <div class="divider"></div>

          <div class="characteristic-edit-shell">
            <p *ngIf="beast.conflict.descriptions.length === 0"><br>This monster has no Descriptions<br></p>
            <div *ngFor="let description of beast.conflict.descriptions; let i = index"
              [ngClass]="{'noDisplay': !(!description.deleted && (selectedRoleId === description.socialroleid || description.allroles))}">
              <div class="conflict-shell edit-shell-box">
                <h3 *ngIf="description.trait !== 'Any'">
                  <mat-form-field>
                    <input placeholder="Description" matInput [value]="description.trait"
                      (change)="captureInput($event, 'conflict', i, 'descriptions', 'trait')">
                  </mat-form-field>
                </h3>
                <section>
                  <mat-checkbox [checked]="description.trait === 'Any'"
                    (change)="checkRandomizeDescription(i, $event.checked)">Make
                    this a Random Description</mat-checkbox>
                </section>
                <br>
                <mat-form-field>
                  <input placeholder="Rank (1 point)" matInput [value]="description.value"
                    (change)="captureInput($event, 'conflict', i, 'descriptions', 'value')">
                </mat-form-field>
                <section>
                  <mat-checkbox [checked]="description.allroles"
                    (change)="checkAllRoles('descriptions', i, $event.checked)">
                    Add to all Roles</mat-checkbox>
                </section>
                <button mat-raised-button (click)="removeNewSecondaryItem('conflict', i, 'descriptions')"
                  color="warn"><i class="fa-solid fa-trash"></i></button>
              </div>
            </div>
          </div>
          <button mat-raised-button (click)="addNewSecondaryItem('conflict', 'descriptions')" color="accent">Add
            Description</button>
          <br />
          <br />

          <h2>Convictions</h2>
          <div class="divider"></div>

          <div class="characteristic-edit-shell">
            <p *ngIf="beast.conflict.convictions.length === 0"><br>This monster has no Convictions<br></p>
            <div *ngFor="let trait of beast.conflict.convictions; let i = index"
              [ngClass]="{'noDisplay': !(!trait.deleted && (selectedRoleId === trait.socialroleid || trait.allroles))}">
              <div class="conflict-shell edit-shell-box">
                <h3 *ngIf="trait.trait !== 'Any'">
                  <mat-form-field>
                    <input placeholder="Conviction" matInput [value]="trait.trait"
                      (change)="captureInput($event, 'conflict', i, 'convictions', 'trait')">
                  </mat-form-field>
                </h3>
                <section>
                  <mat-checkbox [checked]="trait.trait === 'Any'" (change)="checkRandomizeTrait(i, $event.checked)">Make
                    this a Random Conviction</mat-checkbox>
                </section>
                <br>
                <mat-form-field>
                  <input placeholder="Rank (1 point)" matInput [value]="trait.value"
                    (change)="captureInput($event, 'conflict', i, 'convictions', 'value')">
                </mat-form-field>
                <section>
                  <mat-checkbox [checked]="trait.allroles" (change)="checkAllRoles('convictions', i, $event.checked)">
                    Add to
                    all Roles</mat-checkbox>
                </section>
                <button mat-raised-button (click)="removeNewSecondaryItem('conflict', i, 'convictions')" color="warn"><i
                    class="fa-solid fa-trash"></i></button>
              </div>
            </div>
          </div>
          <button mat-raised-button (click)="addNewSecondaryItem('conflict', 'convictions')" color="accent">Add
            Conviction</button>
          <br *ngIf="beast.conflict.convictions.length > 0" />
          <br />
          <mat-form-field class="characteristics-appearing" *ngIf="beast.conflict.convictions.length > 0">
            <input matInput placeholder="Max Convictions Appearing" [value]="beast.traitlimit"
              (change)="captureInput($event, 'traitlimit')">
          </mat-form-field>
          <br />

          <h2>Devotions</h2>
          <div class="divider"></div>

          <div class="characteristic-edit-shell">
            <p *ngIf="beast.conflict.devotions.length === 0"><br>This monster has no Devotions<br></p>
            <div *ngFor="let devotion of beast.conflict.devotions; let i = index"
              [ngClass]="{'noDisplay': !(!devotion.deleted && (selectedRoleId === devotion.socialroleid || devotion.allroles))}">
              <div class="conflict-shell edit-shell-box">
                <h3 *ngIf="devotion.trait !== 'Any'">
                  <mat-form-field>
                    <input placeholder="Devotion" matInput [value]="devotion.trait"
                      (change)="captureInput($event, 'conflict', i, 'devotions', 'trait')">
                  </mat-form-field>
                </h3>
                <section>
                  <mat-checkbox [checked]="devotion.trait === 'Any'"
                    (change)="checkRandomizeDevotion(i, $event.checked)">Make
                    this a Random Devotion</mat-checkbox>
                </section>
                <mat-form-field>
                  <input placeholder="Rank (1 point)" matInput [value]="devotion.value"
                    (change)="captureInput($event, 'conflict', i, 'devotions', 'value')">
                </mat-form-field>
                <section>
                  <mat-checkbox [checked]="devotion.allroles" (change)="checkAllRoles('devotions', i, $event.checked)">
                    Add to all Roles</mat-checkbox>
                </section>
                <button mat-raised-button (click)="removeNewSecondaryItem('conflict', i, 'devotions')" color="warn"><i
                    class="fa-solid fa-trash"></i></button>
              </div>
            </div>
          </div>
          <button mat-raised-button (click)="addNewSecondaryItem('conflict', 'devotions')" color="accent">Add
            Devotion</button>
          <br *ngIf="beast.conflict.devotions.length > 0" />
          <br />
          <mat-form-field class="characteristics-appearing" *ngIf="beast.conflict.devotions.length > 0">
            <input matInput placeholder="Max Devotions Appearing" [value]="beast.devotionlimit"
              (change)="captureInput($event, 'devotionlimit')">
          </mat-form-field>
          <br />

          <h2>Flaws</h2>
          <div class="divider"></div>

          <div class="characteristic-edit-shell">
            <p *ngIf="beast.conflict.flaws.length === 0"><br>This monster has no Flaws<br></p>
            <div *ngFor="let flaw of beast.conflict.flaws; let i = index"
              [ngClass]="{'noDisplay': !(!flaw.deleted && (selectedRoleId === flaw.socialroleid || flaw.allroles))}">
              <div class="conflict-shell edit-shell-box">
                <h3 *ngIf="flaw.trait !== 'Any'">
                  <mat-form-field>
                    <input placeholder="Flaw" matInput [value]="flaw.trait"
                      (change)="captureInput($event, 'conflict', i, 'flaws', 'trait')">
                  </mat-form-field>
                </h3>
                <section>
                  <mat-checkbox [checked]="flaw.trait === 'Any'" (change)="checkRandomizeFlaw(i, $event.checked)">Make
                    this a Random Flaw</mat-checkbox>
                </section>

                <mat-form-field *ngIf="flaw.trait !== 'Any'">
                  <input placeholder="Severity" matInput [value]="flaw.severity"
                    (change)="captureInput($event, 'conflict', i, 'flaws', 'severity')">
                </mat-form-field>

                <mat-form-field *ngIf="flaw.trait !== 'Any'">
                  <input placeholder="Rank (1 point)" matInput [value]="flaw.value"
                    (change)="captureInput($event, 'conflict', i, 'flaws', 'value')">
                </mat-form-field>

                <p *ngIf="flaw.trait === 'Any'" class="flaw-severity-range">This Flaw Severity range:</p>
                <div class="flaw-severity-buttons" *ngIf="flaw.trait === 'Any'">
                  <button id="{{flaw.value === '1' ? 'gray-blue' : ''}}" mat-raised-button
                    (click)="setRankSeverityRank(i, '1')">Random</button>
                  <button id="{{flaw.value === '2' ? 'gray-blue' : ''}}" mat-raised-button
                    (click)="setRankSeverityRank(i, '2')">Low Severity</button>
                  <button id="{{flaw.value === '3' ? 'gray-blue' : ''}}" mat-raised-button
                    (click)="setRankSeverityRank(i, '3')">Mid Severity</button>
                  <button id="{{flaw.value === '4' ? 'gray-blue' : ''}}" mat-raised-button
                    (click)="setRankSeverityRank(i, '4')">High Severity</button>
                </div>
                <section>
                  <mat-checkbox [checked]="flaw.allroles" (change)="checkAllRoles('flaws', i, $event.checked)">Add to
                    all Roles</mat-checkbox>
                </section>
                <button mat-raised-button (click)="removeNewSecondaryItem('conflict', i, 'flaws')" color="warn"><i
                    class="fa-solid fa-trash"></i></button>
              </div>
            </div>
          </div>
          <button mat-raised-button (click)="addNewSecondaryItem('conflict', 'flaws')" color="accent">Add Flaw</button>
          <br *ngIf="beast.conflict.flaws.length > 0" />
          <br />
          <mat-form-field class="characteristics-appearing" *ngIf="beast.conflict.flaws.length > 0">
            <input matInput placeholder="Max Flaws Appearing" [value]="beast.flawlimit"
              (change)="captureInput($event, 'flawlimit')">
          </mat-form-field>
          <br />

        </div>
      </div>
    </mat-tab>
    <mat-tab label="Skills">
      <div class="tab-wrapper">
        <mat-form-field>
          <mat-label>Change Role Type</mat-label>
          <mat-select
            [(value)]="selectedRoleId && beast.roleInfo[selectedRoleId].skillrole ? beast.roleInfo[selectedRoleId].skillrole : selectedRoleId ? null : beast.skillrole"
            (selectionChange)="setSkillRoleType($event)">
            <mat-option>
              No Role
            </mat-option>
            <mat-option *ngFor="let role of objectKeys(skillRolesInfo)" [value]="role">
              {{role}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <div *ngIf="selectedSkillRole && selectedSkillRole.description">
          <p><strong>Description: </strong> {{selectedSkillRole.description}}</p>
        </div>

        <div class="vitals-shell">
          <div *ngIf="selectedRoleId" class="long-field">
            <mat-form-field>
              <input
                id="{{selectedRole && selectedRole.strengths ? selectedRole.strengths.includes('Stress Threshold') ? 'green' : selectedRole.weaknesses.includes('Stress Threshold') ? 'red' : '' : ''}}"
                matInput placeholder="Stress Threshold (1 point / 5 Stress)"
                [value]="beast.roleInfo[selectedRoleId].stress" (change)="captureInput($event, 'stress')">
            </mat-form-field>
          </div>
          <div *ngIf="!selectedRoleId" class="long-field">
            <mat-form-field>
              <input matInput placeholder="Stress Threshold (1 point / 5 Stress)"
                id="{{!selectedRole || !selectedRole.strengths ? '' : selectedRole.strengths.includes('Stress Threshold') ? 'green' : selectedRole.weaknesses.includes('Stress Threshold') ? 'red' : ''}}"
                [value]="beast.stress" (change)="captureInput($event, 'stress')">
            </mat-form-field>
          </div>

          <div class="long-field">
            <mat-form-field>
              <mat-label>Panic (+/-2 points per Cat Above/Below Breaking)</mat-label>
              <mat-select [(value)]="hiddenPanic" (selectionChange)="capturePanic($event)"
                id="{{!selectedRole || !selectedRole.strengths ? '' : selectedRole.strengths.includes('Panic Threshold') ? 'green' : selectedRole.weaknesses.includes('Panic Threshold') ? 'red' : ''}}">
                <mat-option value="1">
                  Always
                </mat-option>
                <mat-option value="2">
                  Unsure
                </mat-option>
                <mat-option value="3">
                  Nervous
                </mat-option>
                <mat-option value="4">
                  Shaken
                </mat-option>
                <mat-option value="5">
                  Breaking
                </mat-option>
                <mat-option value="7">
                  Never
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <p>Panic as Number: {{displayPanic}}</p>
          <br>

          <div *ngIf="selectedRoleId">
            <mat-form-field>
              <input matInput placeholder="Caution Threshold (1 point / 5)"
                [value]="beast.roleInfo[selectedRoleId].caution"
                id="{{selectedRole && selectedRole.strengths ? selectedRole.strengths.includes('Caution Threshold') ? 'green' : selectedRole.weaknesses.includes('Caution Threshold') ? 'red' : '' : ''}}"
                (change)="captureInput($event, 'caution')">
            </mat-form-field>
          </div>
          <div *ngIf="!selectedRoleId">
            <mat-form-field>
              <input matInput placeholder="Caution Threshold (1 point / 5)" [value]="beast.caution"
                id="{{!selectedRole || !selectedRole.strengths ? '' : selectedRole.strengths.includes('Caution Threshold') ? 'green' : selectedRole.weaknesses.includes('Caution Threshold') ? 'red' : ''}}"
                (change)="captureInput($event, 'caution')">
            </mat-form-field>
          </div>
        </div>

        <h2>Skills</h2>
        <div class="divider"></div>

        <div class="characteristic-edit-shell">
          <p *ngIf="beast.skills.length === 0"><br>This monster has no Skills<br></p>
          <div *ngFor="let skill of beast.skills; let i = index"
            [ngClass]="{'noDisplay': !(!skill.deleted && (selectedRoleId === skill.skillroleid || skill.allroles))}">
            <app-skill-display [skillInfo]="skill" [captureInput]="captureInput"
              [removeNewSecondaryItem]="removeNewSecondaryItem" [i]="i" [selectedSkillRole]="selectedSkillRole"
              [combatSkills]="combatSkills" [checkAllRoles]="checkAllRoles" [socialSkills]="socialSkills">
            </app-skill-display>
          </div>
        </div>
        <button mat-raised-button (click)="addNewSecondaryItem('skills')" color="accent">Add Skill</button>

        <br>
        <br>
        <br>

        <h2>Single Obstacles</h2>
        <div class="divider"></div>
        <mat-chip-list>
          <div *ngFor="let obstacle of beast.obstacles; let i = index">
            <mat-chip (click)="removeChip('obstacles', i)" color="warn" selected>
              {{obstacle.obstacleid}}</mat-chip>
          </div>
        </mat-chip-list>
        <mat-form-field>
          <input matInput placeholder="Obstacle ID" [value]="newObstacleId" (change)="captureObstacle($event)">
        </mat-form-field>
        <br>
        <button mat-raised-button color="accent" (click)="addObstacleById()">Add By ID</button>
        <br>
        <br>
        <h2>Skill Challenges</h2>
        <div class="divider"></div>
        <mat-chip-list>
          <div *ngFor="let challenge of beast.challenges; let i = index">
            <mat-chip (click)="removeChip('challenges', i)" color="warn" selected>
              {{challenge.challengeid}}</mat-chip>
          </div>
        </mat-chip-list>
        <mat-form-field>
          <input matInput placeholder="Challenge ID" [value]="newChallengeId" (change)="captureChallenge($event)">
        </mat-form-field>
        <br>
        <button mat-raised-button color="accent" (click)="addChallengeById()">Add By ID</button>
      </div>
    </mat-tab>
    <mat-tab label="Combat">
      <ng-template matTabContent>
        <div class="tab-wrapper">
          <div>
            <mat-form-field>
              <mat-label>Change Role Type</mat-label>
              <mat-select
                [(value)]="selectedRoleId && beast.roleInfo[selectedRoleId].role ? beast.roleInfo[selectedRoleId].role : selectedRoleId ? null : beast.role"
                (selectionChange)="setRoleType($event)">
                <mat-option>
                  No Role
                </mat-option>
                <mat-option *ngFor="let role of objectKeys(combatRolesInfo)" [value]="role">
                  {{role}}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Change Secondary Role Type</mat-label>
              <mat-select [(value)]="selectedRoleId && beast.roleInfo[selectedRoleId] && beast.roleInfo[selectedRoleId].secondaryrole ?
              beast.roleInfo[selectedRoleId].secondaryrole :
              selectedRoleId ? null : beast.secondaryrole" (selectionChange)="setSecondaryRoleType($event)">
                <mat-option>
                  None
                </mat-option>
                <mat-option *ngFor="let role of objectKeys(combatRolesSecondaryInfo)" [value]="role">
                  {{role}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="selectedRole && selectedRole.description">
            <p><strong>Description: </strong> {{selectedRole.description}}</p>
          </div>

          <div *ngIf="selectedRoleId && beast.roleInfo[selectedRoleId].secondaryrole">
            <p class="top-margin"><strong>Secondary Description: </strong>
              {{combatRolesSecondaryInfo[beast.roleInfo[selectedRoleId].secondaryrole].description}}</p>
          </div>
          <div *ngIf="!selectedRoleId && beast.secondaryrole">
            <p class="top-margin"><strong>Secondary Description: </strong>
              {{combatRolesSecondaryInfo[beast.secondaryrole].description}}</p>
          </div>

          <br>
          <div class="divider"></div>
          <mat-form-field class="long-field">
            <div *ngIf="selectedRoleId">
              <input
                id="{{selectedRole && selectedRole.strengths ? selectedRole.strengths.includes('Vitality') ? 'green' : selectedRole.weaknesses.includes('Vitality') ? 'red' : '' : ''}}"
                matInput placeholder="Vitality (1 point / 10 Average Vitality)"
                [value]="beast.roleInfo[selectedRoleId].vitality ? beast.roleInfo[selectedRoleId].vitality : selectedRole && selectedRole.vitality ? selectedRole.vitality : beast.vitality"
                (change)="captureRoleVitality($event)">
            </div>
            <div *ngIf="!selectedRoleId">
              <input matInput placeholder="Vitality (1 point / 10 Average Vitality)"
                id="{{!selectedRole || !selectedRole.strengths ? '' : selectedRole.strengths.includes('Vitality') ? 'green' : selectedRole.weaknesses.includes('Vitality') ? 'red' : ''}}"
                [value]="beast.vitality ? beast.vitality : selectedRole && selectedRole.vitality ? selectedRole.vitality : null"
                (change)="captureInput($event, 'vitality')">
            </div>
          </mat-form-field>
          <p>(Ave: {{averageVitality}})</p>
          <p *ngIf="(selectedRoleId && !beast.roleInfo[selectedRoleId].vitality && beast.roleInfo[selectedRoleId].secondaryrole === 'Fodder') || (!selectedRoleId && !beast.vitality && beast.secondaryrole === 'Fodder')"
            class="warning">This Vitality will be halved since this is the default Vitality for this Role and their
            Secondary is Fodder</p>
          <br>
          <mat-checkbox [checked]="beast.notrauma" (change)="checkTrauma($event.checked)">Immune to Trauma?
          </mat-checkbox>
          <br>
          <br>
          <mat-form-field class="fatigue-field">
            <mat-label>Fatigue Threshold (+/-4 points per Cat Above/Below Critical)</mat-label>
            <mat-select [value]="displayFatigue"
              (selectionChange)="captureSelectWithRoleConsideration($event, 'fatigue')"
              id="{{selectedRole && selectedRole.strengths ? selectedRole.strengths.includes('Fatigue') ? 'green' : selectedRole.weaknesses && selectedRole.weaknesses.includes('Fatigue') ? 'red' : '' : ''}}">
              <mat-option [value]="null">
                Default to Role
              </mat-option>
              <mat-option value="A">
                Always
              </mat-option>
              <mat-option value="H">
                Hurt
              </mat-option>
              <mat-option value="B">
                Blooded
              </mat-option>
              <mat-option value="W">
                Wounded
              </mat-option>
              <mat-option value="C">
                Critical
              </mat-option>
              <mat-option value="N">
                Never
              </mat-option>
            </mat-select>
          </mat-form-field>
          <p>{{fatigueAsVitality}}</p>

          <div class="locational-shell">
            <div *ngFor="let location of beast.locationalvitality; let i = index" class="locational-id-shell"
              [ngClass]="{'noDisplay': !(!location.deleted && (selectedRoleId === location.roleid || location.allroles))}">
              <mat-form-field>
                <input placeholder="Location" matInput [value]="location.location"
                  (change)="captureInput($event, 'locationalvitality', i, 'location')">
              </mat-form-field>
              <mat-form-field>
                <input placeholder="Vitality" matInput [value]="location.vitality"
                  (change)="captureInput($event, 'locationalvitality', i, 'vitality')">
              </mat-form-field>
              <p>(Ave: {{calculatorService.calculateAverageOfDice(location.vitality)}})</p>
              <section>
                <mat-checkbox [checked]="location.allroles"
                  (change)="checkAllRoles('locationalvitality', i, $event.checked)">
                  Add to all Roles</mat-checkbox>
              </section>
              <button mat-raised-button (click)="removeNewSecondaryItem('locationalvitality', i)" color="warn"><i
                  class="fa-solid fa-trash"></i></button>
            </div>
          </div>
          <button mat-raised-button (click)="addNewSecondaryItem('locationalvitality')" color="accent">Add Locational
            Vitality</button>

          <br>
          <br>
          <div class="combat-shell unset-width">
            <div *ngFor="let square of beast.combat; let i = index">
              <div *ngIf="!square.deleted && selectedRoleId === square.roleid" class="conflict-shell unset-width">
                <app-weapon-square [square]="square" [selectedRoleId]="selectedRoleId" [selectedRole]="selectedRole"
                  [calculateCombatPoints]="calculateCombatPoints" [index]="i"
                  [roleVitality]="selectedRoleId ? beast.roleInfo[this.selectedRoleId].average : null"
                  [mainVitality]="averageVitality" [removeNewSecondaryItem]="removeNewSecondaryItem"
                  [copyWeaponSquare]="copyWeaponSquare"
                  [beastSize]="selectedRoleId ? beast.roleInfo[selectedRoleId].size : beast.size"
                  [secondaryRole]="selectedRoleId && beast.roleInfo[selectedRoleId] && beast.roleInfo[selectedRoleId].secondaryrole ? beast.roleInfo[selectedRoleId].secondaryrole : selectedRoleId ? null : beast.secondaryrole">
                </app-weapon-square>
              </div>
            </div>
            <button mat-raised-button (click)="addNewSecondaryItem('combat')" color="accent">Add Weapon</button>
          </div>

          <br>

          <h2>Movement</h2>
          <p class="warning">Don't inlcude 'ft / sec'.</p>
          <div class="vitals-shell">
            <div *ngFor="let movementType of beast.movement; let i = index"
              [ngClass]="{'noDisplay': !(!movementType.deleted && (selectedRoleId === movementType.roleid || movementType.allroles))}">
              <div *ngIf="i > 0" class="divider white"></div>
              <h3>
                <mat-form-field>
                  <input placeholder="Movement Type" matInput [value]="movementType.type"
                    id="{{!selectedRole || !selectedRole.strengths ? '' : selectedRole.strengths.includes('Movement') ? 'green' : selectedRole.weaknesses.includes('Movement') ? 'red' : ''}}"
                    (change)="captureInput($event, 'movement', i, 'type')">
                </mat-form-field>
              </h3>
              <mat-form-field>
                <input placeholder="Stroll/Crawl" matInput [value]="movementType.stroll"
                  (change)="captureInput($event, 'movement', i, 'stroll')">
              </mat-form-field>
              <mat-form-field>
                <input placeholder="Walk" matInput [value]="movementType.walk"
                  (change)="captureInput($event, 'movement', i, 'walk')">
              </mat-form-field>
              <mat-form-field>
                <input placeholder="Jog" matInput [value]="movementType.jog"
                  (change)="captureInput($event, 'movement', i, 'jog')">
              </mat-form-field>
              <mat-form-field>
                <input placeholder="Run" matInput [value]="movementType.run"
                  (change)="captureInput($event, 'movement', i, 'run')">
              </mat-form-field>
              <mat-form-field>
                <input placeholder="Sprint" matInput [value]="movementType.sprint"
                  (change)="captureInput($event, 'movement', i, 'sprint')">
              </mat-form-field>
              <div class="flex-row-opposite">
                <section>
                  <mat-checkbox [checked]="movementType.allroles"
                    (change)="checkAllRoles('movement', i, $event.checked)">
                    Add to all Roles</mat-checkbox>
                </section>
                <button mat-raised-button (click)="removeNewSecondaryItem('movement', i)" color="warn"><i
                    class="fa-solid fa-trash"></i></button>
              </div>
            </div>
          </div>
          <button mat-raised-button (click)="addNewSecondaryItem('movement')" color="accent">Add Movement</button>
        </div>
      </ng-template>
    </mat-tab>
    <mat-tab label="Random Encounters">
      <div class="tab-wrapper" id="random-encounter-tab">
        <div *ngIf="encounter" class="random-encounters">
          <!-- <div class="temperamentList" *ngIf="!rank.deleted"> -->
          <div class="random-container">
            <table class="first-column-left">
              <thead>
                <th colspan="3">Temperament</th>
              </thead>
              <tr>
                <th>Value</th>
                <th>Weight</th>
                <th></th>
              </tr>
              <tr *ngFor="let temperament of encounter.temperament.temperament; let i = index"
                [ngClass]="{'noDisplay': temperament.deleted}">
                <td matTooltip="{{temperament.tooltip}}" matTooltipPosition="right">{{temperament.temperament}}</td>
                <td><input class="table-input" placeholder="Weight" value="{{temperament.weight}}"
                  (change)="changeEncounterItemSubtype($event, 'temperament', 'weight', i)"></td>
                <td><i (click)="removeEncounterItem(i, 'temperament', 'temperament')" class="fa-solid fa-trash"></i>
                </td>
              </tr>
              <tr>
                <td>
                  <input class="table-input-clearable" placeholder="Temperament" [matAutocomplete]="tempauto" [formControl]="temperamentController">
                  <mat-autocomplete #tempauto="matAutocomplete" [displayWith]="getDisplayTextTemp"
                    (optionSelected)="captureEncounterAutocomplete($event, 'temperament', 'temperament')">
                    <mat-option *ngFor="let temperament of tempFiltered | async" [value]="temperament"
                      matTooltip="{{temperament.tooltip}}" matTooltipPosition="right">
                      {{temperament.temperament}}
                    </mat-option>
                  </mat-autocomplete>
                </td>
                <td><input class="table-input-clearable" placeholder="Weight"
                    (change)="captureEncounterInput($event, 'temperament', 'weight')"></td>

                <td><i *ngIf="temperament.temperament && temperament.weight"
                    (click)="addEncounterItem('temperament', 'temperament')"
                    class="fa-sharp fa-solid fa-square-plus"></i>
                  <i *ngIf="!temperament.temperament && !temperament.weight"
                    [ngClass]="{'disabled': !temperament.temperament || !temperament.weight}"
                    class="fa-sharp fa-solid fa-square-plus"></i>
                </td>
              </tr>
            </table>
          </div>

          <div class="random-container">
            <table class="first-column-left">
              <thead>
                <th colspan="4">Number Appearing</th>
              </thead>
              <tr>
                <th>Numbers</th>
                <th>Miles from Lair</th>
                <th>Weight</th>
                <th></th>
              </tr>
              <tr *ngFor="let row of encounter.numbers; let i = index" [ngClass]="{'noDisplay': row.deleted}">
                <td><input class="table-input" value="{{row.numbers}}"
                    (change)="changeEncounterItem($event, 'numbers', 'numbers', i)"></td>
                <td><input class="table-input" value="{{row.miles}}"
                    (change)="changeEncounterItem($event, 'numbers', 'miles', i)"></td>
                <td><input class="table-input" value="{{row.weight}}"
                    (change)="changeEncounterItem($event, 'numbers', 'weight', i)"></td>
                <td><i (click)="removeSingleEncounter(i, 'numbers')" class="fa-solid fa-trash"></i></td>
              </tr>
              <tr>
                <td><input class="table-input-clearable" placeholder="Number in dice"
                    (change)="captureEncounterInput($event, 'numbers', 'numbers')"></td>
                <td><input class="table-input-clearable" placeholder="Miles in dice"
                    (change)="captureEncounterInput($event, 'numbers', 'miles')"></td>
                <td><input class="table-input-clearable" placeholder="Weight"
                    (change)="captureEncounterInput($event, 'numbers', 'weight')"></td>
                <td><i *ngIf="numbers.numbers && numbers.weight && numbers.miles"
                    (click)="addSingleEncounterItem('numbers')" class="fa-sharp fa-solid fa-square-plus"></i>
                  <i *ngIf="!numbers.numbers && !numbers.weight && !numbers.miles"
                    [ngClass]="{'disabled': !numbers.numbers || !numbers.weight || !numbers.miles}"
                    class="fa-sharp fa-solid fa-square-plus"></i>
                </td>
              </tr>
            </table>

          </div>

          <div class="random-container">
            <table class="first-column-left">
              <thead>
                <th colspan="4">Groups</th>
              </thead>
              <tr>
                <th>Group</th>
                <th>Role</th>
                <th>Weight</th>
                <th></th>
              </tr>
              <tbody class="table-subsection" *ngFor="let group of encounter.groups; let i = index"
                [ngClass]="{'noDisplay': group.deleted}">
                <tr>
                  <td colspan="2"><input placeholder="Group Label" value="{{group.label}}" class="table-input"
                      (change)="changeEncounterItem($event, 'groups', 'label', i)"></td>
                  <td><input placeholder="Group Weight" value="{{group.weight}}" class="table-input"
                      (change)="changeEncounterItem($event, 'groups', 'weight', i)"></td>
                  <td><i (click)="removeSingleEncounter(i, 'groups')" class="fa-solid fa-trash"></i></td>
                </tr>
                <tr *ngFor="let row of group.weights; let rowi = index" [ngClass]="{'noDisplay': row.deleted}">
                  <td> </td>
                  <td><input placeholder="Role" value="{{row.role}}" class="table-input"
                      (change)="changeEncounterItemInArray($event, 'groups', 'weights', i, rowi, 'role')"></td>
                  <td><input placeholder="Weight" value="{{row.weight}}" class="table-input"
                      (change)="changeEncounterItemInArray($event, 'groups', 'weights', i, rowi, 'weight')"></td>
                  <td><i (click)="removeEncounterItemFromInnerArray('groups', i, 'weights', rowi)"
                      class="fa-solid fa-trash"></i></td>
                </tr>
                <tr>
                  <td> </td>
                  <td><input placeholder="Role" class="table-input-clearable"
                      (change)="captureEncounterInputAtIndex($event, 'weights', 'role', i)"></td>
                  <td><input placeholder="Role Weight" class="table-input-clearable"
                      (change)="captureEncounterInputAtIndex($event, 'weights', 'weight', i)"></td>
                  <td><i *ngIf="weights[i] && weights[i].role && weights[i].weight"
                      (click)="addEncounterItemFromArray('groups','weights',  i)"
                      class="fa-sharp fa-solid fa-square-plus"></i>
                    <i *ngIf="!weights[i] || !weights[i].role && !weights[i].weight"
                      class="fa-sharp fa-solid fa-square-plus"></i>
                  </td>
                </tr>
              </tbody>
              <tbody class="table-subsection">
                <tr>
                  <td colspan="2"><input placeholder="Group Label" class="table-input-clearable"
                      (change)="captureEncounterInput($event, 'groups', 'label')"></td>
                  <td><input placeholder="Group Weight" class="table-input-clearable"
                      (change)="captureEncounterInput($event, 'groups', 'weight')"></td>
                  <td><i *ngIf="groups.label && groups.weight" [ngClass]="{'disabled': !groups.label || !groups.weight}"
                      (click)="addSingleEncounterItem('groups')"
                      class="subheader-icon fa-sharp fa-solid fa-square-plus"></i>
                    <i *ngIf="!groups.label && !groups.weight" [ngClass]="{'disabled': !groups.label || !groups.weight}"
                      class="subheader-icon fa-sharp fa-solid fa-square-plus"></i>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="random-container">
            <table class="first-column-left">
              <thead>
                <th colspan="2">Verb</th>
              </thead>
              <tr *ngFor="let verb of encounter.verb.verb; let i = index" [ngClass]="{'noDisplay': verb.deleted}">
                <td>{{verb.verb}}</td>
                <td><i (click)="removeEncounterItem(i, 'verb', 'verb')" class="fa-solid fa-trash"></i></td>
              </tr>

              <tr>
                <td>
                  <input class="table-input-clearable" placeholder="Verb" [matAutocomplete]="verbauto" [formControl]="verbController"
                    (blur)="addOption($event, 'verb')">
                  <mat-autocomplete #verbauto="matAutocomplete" [displayWith]="getDisplayTextVerb"
                    (optionSelected)="captureEncounterAutocomplete($event, 'verb', 'verb')">
                    <mat-option *ngFor="let verb of verbFiltered | async" [value]="verb">
                      {{verb.verb}}
                    </mat-option>
                  </mat-autocomplete>
                </td>

                <td><i *ngIf="verb.verb" (click)="addEncounterItem('verb', 'verb')"
                    class="fa-sharp fa-solid fa-square-plus"></i>
                  <i *ngIf="!verb.verb" [ngClass]="{'disabled': !verb.verb}"
                    class="fa-sharp fa-solid fa-square-plus"></i>
                </td>
              </tr>
            </table>
          </div>

          <div class="random-container">
            <table class="first-column-left">
              <thead>
                <th colspan="2">Noun</th>
              </thead>
              <tr *ngFor="let noun of encounter.noun.noun; let i = index" [ngClass]="{'noDisplay': noun.deleted}">
                <td>{{noun.noun}}</td>
                <i (click)="removeEncounterItem(i, 'noun', 'noun')" class="fa-solid fa-trash"></i>
              </tr>
              <tr>
                <td>
                  <input class="table-input-clearable" placeholder="Noun" [matAutocomplete]="nounauto" [formControl]="nounController"
                    (blur)="addOption($event, 'noun')">
                  <mat-autocomplete #nounauto="matAutocomplete" [displayWith]="getDisplayTextNoun"
                    (optionSelected)="captureEncounterAutocomplete($event, 'noun', 'noun')">
                    <mat-option *ngFor="let noun of nounFiltered | async" [value]="noun">
                      {{noun.noun}}
                    </mat-option>
                  </mat-autocomplete>
                </td>

                <td><i *ngIf="noun.noun" (click)="addEncounterItem('noun', 'noun')"
                    class="fa-sharp fa-solid fa-square-plus"></i>
                  <i *ngIf="!noun.noun" [ngClass]="{'disabled': !noun.noun}"
                    class="fa-sharp fa-solid fa-square-plus"></i>
                </td>
              </tr>
            </table>
          </div>

          <div class="random-container">
            <table class="first-column-left">
              <thead>
                <th colspan="3">Signs <i class="fas fa-info-circle"
                    matTooltip="Signs are evidence of the monster's passing or evidence that the monster is near. They can be sights, sounds, leavings, victims, tracks, smells & vapors, environmental damage, and/or intentional markings."></i>
                </th>
              </thead>
              <tr>
                <th>Value</th>
                <th>Weight</th>
                <th></th>
              </tr>
              <tr *ngFor="let sign of encounter.signs.signs; let i = index" [ngClass]="{'noDisplay': sign.deleted}">
                <td>{{sign.sign}}</td>
                <td><input class="table-input" placeholder="Weight" value="{{sign.weight}}"
                  (change)="changeEncounterItemSubtype($event, 'signs', 'weight', i)"></td>
                <td><i (click)="removeEncounterItem(i, 'signs', 'signs')" class="fa-solid fa-trash"></i>
                </td>
              </tr>
              <tr>
                <td>
                  <input class="table-input-clearable" placeholder="Sign" [matAutocomplete]="signauto" [formControl]="signsController"
                    (blur)="addOption($event, 'signs')">
                  <mat-autocomplete #signauto="matAutocomplete" [displayWith]="getDisplayTextSign"
                    (optionSelected)="captureEncounterAutocomplete($event, 'signs', 'sign')">
                    <mat-option *ngFor="let sign of signsFiltered | async" [value]="sign">
                      {{sign.sign}}
                    </mat-option>
                  </mat-autocomplete>
                </td>
                <td><input placeholder="Weight" class="table-input-clearable" (change)="captureEncounterInput($event, 'signs', 'weight')">
                </td>
                <td><i *ngIf="signs.sign && signs.weight" (click)="addEncounterItem('signs', 'signs')"
                    class="fa-sharp fa-solid fa-square-plus"></i>
                  <i *ngIf="!signs.sign && !signs.weight" [ngClass]="{'disabled': !signs.sign || !signs.weight}"
                    class="fa-sharp fa-solid fa-square-plus"></i>
                </td>
              </tr>
            </table>

            <!--             
            <h4 class="add-from-list">Add from List</h4>
            <div class="add-new-random">
              <mat-form-field>
                <mat-label>Select Sign</mat-label>
                <mat-select (selectionChange)="captureEncounter($event, 'signs')">
                  <mat-option *ngFor="let sign of encounter.signs.allSigns" [value]="sign">
                    {{sign.sign}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field>
                <input placeholder="Weight" matInput (change)="captureEncounterInput($event, 'signs', 'weight')">
              </mat-form-field>
            </div>
            <h4>Add New</h4>
            <div class="add-new-random">
              <mat-form-field>
                <input placeholder="Sign" matInput [value]="signs.sign"
                  (change)="captureEncounterInput($event, 'signs', 'sign')">
              </mat-form-field>
              <mat-form-field>
                <input placeholder="Weight" matInput [value]="signs.weight"
                  (change)="captureEncounterInputInt($event, 'signs', 'weight')">
              </mat-form-field>
            </div>
            <button mat-raised-button (click)="addEncounterItem('signs', 'signs')" color="accent"
              [disabled]="!signs.sign || !signs.weight"><i class="fa-solid fa-plus"></i></button> -->
          </div>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Loot">
      <div class="tab-wrapper">
        <h2>Carried Loot</h2>
        <div class="divider"></div>
        <div class="characteristic-edit-shell">
          <div *ngFor="let lootitem of beast.loot; let i = index" [ngClass]="{'noDisplay': lootitem.deleted}"
            class="carried-loot-shell">
            <div class="conflict-shell edit-shell-box">
              <h3>
                <mat-form-field>
                  <input placeholder="Loot" matInput [value]="lootitem.loot"
                    (change)="captureInput($event, 'loot', i, 'loot')">
                </mat-form-field>
              </h3>
              <mat-form-field>
                <input placeholder="Value" matInput [value]="lootitem.price"
                  (change)="captureInput($event, 'loot', i, 'price')">
              </mat-form-field>
              <button mat-raised-button (click)="removeNewSecondaryItem('loot', i)" color="warn"><i
                  class="fa-solid fa-trash"></i></button>
            </div>
          </div>
        </div>
        <button mat-raised-button (click)="addNewSecondaryItem('loot')" color="accent">Add Loot</button>
        <br />
        <br />
        <h3 class="loot-notes-subtitle">Loot Notes</h3>
        <div>
          <quill-editor [(ngModel)]="beast.lootnotes" (onContentChanged)="captureHTML($event, 'lootnotes')">
          </quill-editor>
        </div>
        <br />

        <div class="lair-loot-shell">
          <div class="lair-loot-category-shell">
            <h3>Coins</h3>
            <div class="loot-inner-shell">
              <mat-form-field>
                <mat-label>Copper</mat-label>
                <mat-select [value]="beast.carriedloot.copper"
                  (selectionChange)="captureSelectForObject($event, 'copper', 'carriedloot')">
                  <mat-option>
                    Nothing
                  </mat-option>
                  <mat-option value="a">
                    {{lootTables.staticValues.a}}
                  </mat-option>
                  <mat-option value="b">
                    {{lootTables.staticValues.b}}
                  </mat-option>
                  <mat-option value="c">
                    {{lootTables.staticValues.c}}
                  </mat-option>
                  <mat-option value="d">
                    {{lootTables.staticValues.d}}
                  </mat-option>
                  <mat-option value="e">
                    {{lootTables.staticValues.e}}
                  </mat-option>
                  <mat-option value="f">
                    {{lootTables.staticValues.f}}
                  </mat-option>
                  <mat-option value="g">
                    {{lootTables.staticValues.g}}
                  </mat-option>
                  <mat-option value="h">
                    {{lootTables.staticValues.h}}
                  </mat-option>
                  <mat-option value="i">
                    {{lootTables.staticValues.i}}
                  </mat-option>
                  <mat-option value="j">
                    {{lootTables.staticValues.j}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field>
                <mat-label>Silver</mat-label>
                <mat-select [value]="beast.carriedloot.silver"
                  (selectionChange)="captureSelectForObject($event, 'silver', 'carriedloot')">
                  <mat-option>
                    Nothing
                  </mat-option>
                  <mat-option value="a">
                    {{lootTables.staticValues.a}}
                  </mat-option>
                  <mat-option value="b">
                    {{lootTables.staticValues.b}}
                  </mat-option>
                  <mat-option value="c">
                    {{lootTables.staticValues.c}}
                  </mat-option>
                  <mat-option value="d">
                    {{lootTables.staticValues.d}}
                  </mat-option>
                  <mat-option value="e">
                    {{lootTables.staticValues.e}}
                  </mat-option>
                  <mat-option value="f">
                    {{lootTables.staticValues.f}}
                  </mat-option>
                  <mat-option value="g">
                    {{lootTables.staticValues.g}}
                  </mat-option>
                  <mat-option value="h">
                    {{lootTables.staticValues.h}}
                  </mat-option>
                  <mat-option value="i">
                    {{lootTables.staticValues.i}}
                  </mat-option>
                  <mat-option value="j">
                    {{lootTables.staticValues.j}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field>
                <mat-label>Gold</mat-label>
                <mat-select [value]="beast.carriedloot.gold"
                  (selectionChange)="captureSelectForObject($event, 'gold', 'carriedloot')">
                  <mat-option>
                    Nothing
                  </mat-option>
                  <mat-option value="a">
                    {{lootTables.staticValues.a}}
                  </mat-option>
                  <mat-option value="b">
                    {{lootTables.staticValues.b}}
                  </mat-option>
                  <mat-option value="c">
                    {{lootTables.staticValues.c}}
                  </mat-option>
                  <mat-option value="d">
                    {{lootTables.staticValues.d}}
                  </mat-option>
                  <mat-option value="e">
                    {{lootTables.staticValues.e}}
                  </mat-option>
                  <mat-option value="f">
                    {{lootTables.staticValues.f}}
                  </mat-option>
                  <mat-option value="g">
                    {{lootTables.staticValues.g}}
                  </mat-option>
                  <mat-option value="h">
                    {{lootTables.staticValues.h}}
                  </mat-option>
                  <mat-option value="i">
                    {{lootTables.staticValues.i}}
                  </mat-option>
                  <mat-option value="j">
                    {{lootTables.staticValues.j}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>

          <div class="lair-loot-category-shell">
            <h3>Potions, Scrolls, Alm Scripts</h3>
            <div>
              <br />
              <mat-form-field>
                <mat-label>Potions</mat-label>
                <mat-select [value]="beast.carriedloot.potion"
                  (selectionChange)="captureSelectForObject($event, 'potion', 'carriedloot')">
                  <mat-option>
                    None
                  </mat-option>
                  <mat-option value="a">
                    {{lootTables.numberAppearing.a}}
                  </mat-option>
                  <mat-option value="b">
                    {{lootTables.numberAppearing.b}}
                  </mat-option>
                  <mat-option value="c">
                    {{lootTables.numberAppearing.c}}
                  </mat-option>
                  <mat-option value="d">
                    {{lootTables.numberAppearing.d}}
                  </mat-option>
                  <mat-option value="e">
                    {{lootTables.numberAppearing.e}}
                  </mat-option>
                  <mat-option value="f">
                    {{lootTables.numberAppearing.f}}
                  </mat-option>
                  <mat-option value="g">
                    {{lootTables.numberAppearing.g}}
                  </mat-option>
                  <mat-option value="h">
                    {{lootTables.numberAppearing.h}}
                  </mat-option>
                  <mat-option value="i">
                    {{lootTables.numberAppearing.i}}
                  </mat-option>
                  <mat-option value="j">
                    {{lootTables.numberAppearing.j}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <div class="divider white"></div>

              <table class="first-column-left">
                <thead>
                  <th colspan="3">Scrolls</th>
                </thead>
                <tr>
                  <th>Number</th>
                  <th>Power (SP)</th>
                  <th></th>
                </tr>
                <tr *ngFor="let scroll of beast.carriedloot.scrolls; let i = index"
                  [ngClass]="{'noDisplay': scroll.deleted }">
                  <td>{{lootTables.numberAppearing[scroll.number]}}</td>
                  <td>{{lootTables.scrollPower[scroll.power]}}</td>
                  <td><i (click)="removeScroll(i, 'carriedloot')" class="fa-solid fa-trash"></i>
                  </td>
                </tr>
              </table>
              <div>
                <mat-form-field>
                  <mat-label>Number of Scrolls</mat-label>
                  <mat-select (selectionChange)="captureScroll($event, 'number')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.numberAppearing.a}}
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.numberAppearing.b}}
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.numberAppearing.c}}
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.numberAppearing.d}}
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.numberAppearing.e}}
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.numberAppearing.f}}
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.numberAppearing.g}}
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.numberAppearing.h}}
                    </mat-option>
                    <mat-option value="i">
                      {{lootTables.numberAppearing.i}}
                    </mat-option>
                    <mat-option value="j">
                      {{lootTables.numberAppearing.j}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Scroll Power Range</mat-label>
                  <mat-select (selectionChange)="captureScroll($event, 'power')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.scrollPower.a}} SP
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.scrollPower.b}} SP
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.scrollPower.c}} SP
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.scrollPower.d}} SP
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button mat-raised-button (click)="captureAddScroll('carriedloot')" color="accent"
                [disabled]="!scroll.number || !scroll.power"><i class="fa-solid fa-plus"></i></button>

              <div class="divider white"></div>

              <table class="first-column-left">
                <thead>
                  <th colspan="3">Alm Scripts</th>
                </thead>
                <tr>
                  <th>Number</th>
                  <th>Favor</th>
                  <th></th>
                </tr>
                <tr *ngFor="let alm of beast.carriedloot.alms; let i = index" [ngClass]="{'noDisplay': alm.deleted }">
                  <td>{{lootTables.numberAppearing[alm.number]}}</td>
                  <td>{{lootTables.almsFavor[alm.favor]}}</td>
                  <td><i (click)="removeAlm(i, 'carriedloot')" class="fa-solid fa-trash"></i>
                  </td>
                </tr>
              </table>
              <div>
                <mat-form-field>
                  <mat-label>Number of Alm Scripts</mat-label>
                  <mat-select (selectionChange)="captureAlm($event, 'number')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.numberAppearing.a}}
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.numberAppearing.b}}
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.numberAppearing.c}}
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.numberAppearing.d}}
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.numberAppearing.e}}
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.numberAppearing.f}}
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.numberAppearing.g}}
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.numberAppearing.h}}
                    </mat-option>
                    <mat-option value="i">
                      {{lootTables.numberAppearing.i}}
                    </mat-option>
                    <mat-option value="j">
                      {{lootTables.numberAppearing.j}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Alm Script Favor Range</mat-label>
                  <mat-select (selectionChange)="captureAlm($event, 'favor')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.almsFavor.a}}
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.almsFavor.b}}
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.almsFavor.c}}
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.almsFavor.d}}
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.almsFavor.e}}
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.almsFavor.f}}
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.almsFavor.g}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button mat-raised-button (click)="captureAddAlm('carriedloot')" color="accent"
                [disabled]="!alm.number || !alm.favor"><i class="fa-solid fa-plus"></i></button>
            </div>
          </div>


          <div class="lair-loot-category-shell">
            <h3>Equipment</h3>
            <br />
            <div>
              <table class="first-column-left">
                <thead>
                  <th colspan="3">Mundane Equipment</th>
                </thead>
                <tr>
                  <th>Value</th>
                  <th>Number (sc)</th>
                  <th></th>
                </tr>
                <tr *ngFor="let equipment of beast.carriedloot.equipment; let i = index"
                  [ngClass]="{'noDisplay': equipment.deleted }">
                  <td>{{lootTables.staticValues[equipment.value]}}</td>
                  <td>{{lootTables.numberAppearing[equipment.number]}}</td>
                  <td><i (click)="removeEqupment(i, 'carriedloot')" class="fa-solid fa-trash"></i>
                  </td>
                </tr>
              </table>
              <div>
                <mat-form-field>
                  <mat-label>Equipment Value</mat-label>
                  <mat-select (selectionChange)="captureEquipment($event, 'value')">
                    <mat-option>
                      No Value
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.staticValues.a}} sc
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.staticValues.b}} sc
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.staticValues.c}} sc
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.staticValues.d}} sc
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.staticValues.e}} sc
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.staticValues.f}} sc
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.staticValues.g}} sc
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.staticValues.h}} sc
                    </mat-option>
                    <mat-option value="i">
                      {{lootTables.staticValues.i}} sc
                    </mat-option>
                    <mat-option value="j">
                      {{lootTables.staticValues.j}} sc
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Equipment Number</mat-label>
                  <mat-select (selectionChange)="captureEquipment($event, 'number')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.numberAppearing.a}}
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.numberAppearing.b}}
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.numberAppearing.c}}
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.numberAppearing.d}}
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.numberAppearing.e}}
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.numberAppearing.f}}
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.numberAppearing.g}}
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.numberAppearing.h}}
                    </mat-option>
                    <mat-option value="i">
                      {{lootTables.numberAppearing.i}}
                    </mat-option>
                    <mat-option value="j">
                      {{lootTables.numberAppearing.j}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button mat-raised-button (click)="captureAddEquipment('carriedloot')" color="accent"
                [disabled]="!equipment.value || !equipment.number"><i class="fa-solid fa-plus"></i></button>

              <div class="divider white"></div>

              <table class="first-column-left">
                <thead>
                  <th colspan="3">Superior Equipment</th>
                </thead>
                <tr>
                  <th>Value</th>
                  <th>Value (sc)</th>
                  <th></th>
                </tr>
                <tr *ngFor="let traited of beast.carriedloot.traited; let i = index"
                  [ngClass]="{'noDisplay': traited.deleted }">
                  <td>{{lootTables.traitedChance[traited.chancetable]}}</td>
                  <td>{{lootTables.staticValues[traited.value]}}</td>
                  <td><i (click)="removeTraited(i, 'carriedloot')" class="fa-solid fa-trash"></i>
                  </td>
                </tr>
              </table>
              <div>
                <mat-form-field>
                  <mat-label>Superior Equipment Value</mat-label>
                  <mat-select (selectionChange)="captureTraited($event, 'value')">
                    <mat-option>
                      No Value
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.staticValues.a}} sc
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.staticValues.b}} sc
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.staticValues.c}} sc
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.staticValues.d}} sc
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.staticValues.e}} sc
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.staticValues.f}} sc
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.staticValues.g}} sc
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.staticValues.h}} sc
                    </mat-option>
                    <mat-option value="i">
                      {{lootTables.staticValues.i}} sc
                    </mat-option>
                    <mat-option value="j">
                      {{lootTables.staticValues.j}} sc
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Superior Equipment Chance Table</mat-label>
                  <mat-select (selectionChange)="captureTraited($event, 'chancetable')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.traitedChance.a}}
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.traitedChance.b}}
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.traitedChance.c}}
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.traitedChance.d}}
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.traitedChance.e}}
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.traitedChance.f}}
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.traitedChance.g}}
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.traitedChance.h}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button mat-raised-button (click)="captureAddTraited('carriedloot')" color="accent"
                [disabled]="!traited.value || !traited.chancetable"><i class="fa-solid fa-plus"></i></button>
            </div>
          </div>

          <div class="lair-loot-category-shell">
            <h3>Woundrous Items</h3>
            <div class="loot-inner-shell">
              <mat-form-field>
                <mat-label>Relic Chance</mat-label>
                <mat-select [value]="beast.carriedloot.relic"
                  (selectionChange)="captureSelectForObject($event, 'relic', 'carriedloot')">
                  <mat-option>
                    No Chance of Either
                  </mat-option>
                  <mat-option value="a">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.a)}}
                  </mat-option>
                  <mat-option value="b">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.b)}}
                  </mat-option>
                  <mat-option value="c">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.c)}}
                  </mat-option>
                  <mat-option value="d">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.d)}}
                  </mat-option>
                  <mat-option value="e">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.e)}}
                  </mat-option>
                  <mat-option value="f">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.f)}}
                  </mat-option>
                  <mat-option value="g">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.g)}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field>
                <mat-label>Enchanted Item Chance</mat-label>
                <mat-select [value]="beast.carriedloot.enchanted"
                  (selectionChange)="captureSelectForObject($event, 'enchanted', 'carriedloot')">
                  <mat-option>
                    No Chance of Either
                  </mat-option>
                  <mat-option value="a">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.a)}}
                  </mat-option>
                  <mat-option value="b">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.b)}}
                  </mat-option>
                  <mat-option value="c">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.c)}}
                  </mat-option>
                  <mat-option value="d">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.d)}}
                  </mat-option>
                  <mat-option value="e">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.e)}}
                  </mat-option>
                  <mat-option value="f">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.f)}}
                  </mat-option>
                  <mat-option value="g">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.g)}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <h2>Lair Loot</h2>
        <div class="divider"></div>
        <div class="lair-loot-shell">
          <div class="lair-loot-category-shell">
            <h3>Coins</h3>
            <div class="loot-inner-shell">
              <mat-form-field>
                <mat-label>Copper</mat-label>
                <mat-select [value]="beast.lairloot.copper"
                  (selectionChange)="captureSelectForObject($event, 'copper', 'lairloot')">
                  <mat-option>
                    Nothing
                  </mat-option>
                  <mat-option value="a">
                    {{lootTables.staticValues.a}}
                  </mat-option>
                  <mat-option value="b">
                    {{lootTables.staticValues.b}}
                  </mat-option>
                  <mat-option value="c">
                    {{lootTables.staticValues.c}}
                  </mat-option>
                  <mat-option value="d">
                    {{lootTables.staticValues.d}}
                  </mat-option>
                  <mat-option value="e">
                    {{lootTables.staticValues.e}}
                  </mat-option>
                  <mat-option value="f">
                    {{lootTables.staticValues.f}}
                  </mat-option>
                  <mat-option value="g">
                    {{lootTables.staticValues.g}}
                  </mat-option>
                  <mat-option value="h">
                    {{lootTables.staticValues.h}}
                  </mat-option>
                  <mat-option value="i">
                    {{lootTables.staticValues.i}}
                  </mat-option>
                  <mat-option value="j">
                    {{lootTables.staticValues.j}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field>
                <mat-label>Silver</mat-label>
                <mat-select [value]="beast.lairloot.silver"
                  (selectionChange)="captureSelectForObject($event, 'silver', 'lairloot')">
                  <mat-option>
                    Nothing
                  </mat-option>
                  <mat-option value="a">
                    {{lootTables.staticValues.a}}
                  </mat-option>
                  <mat-option value="b">
                    {{lootTables.staticValues.b}}
                  </mat-option>
                  <mat-option value="c">
                    {{lootTables.staticValues.c}}
                  </mat-option>
                  <mat-option value="d">
                    {{lootTables.staticValues.d}}
                  </mat-option>
                  <mat-option value="e">
                    {{lootTables.staticValues.e}}
                  </mat-option>
                  <mat-option value="f">
                    {{lootTables.staticValues.f}}
                  </mat-option>
                  <mat-option value="g">
                    {{lootTables.staticValues.g}}
                  </mat-option>
                  <mat-option value="h">
                    {{lootTables.staticValues.h}}
                  </mat-option>
                  <mat-option value="i">
                    {{lootTables.staticValues.i}}
                  </mat-option>
                  <mat-option value="j">
                    {{lootTables.staticValues.j}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field>
                <mat-label>Gold</mat-label>
                <mat-select [value]="beast.lairloot.gold"
                  (selectionChange)="captureSelectForObject($event, 'gold', 'lairloot')">
                  <mat-option>
                    Nothing
                  </mat-option>
                  <mat-option value="a">
                    {{lootTables.staticValues.a}}
                  </mat-option>
                  <mat-option value="b">
                    {{lootTables.staticValues.b}}
                  </mat-option>
                  <mat-option value="c">
                    {{lootTables.staticValues.c}}
                  </mat-option>
                  <mat-option value="d">
                    {{lootTables.staticValues.d}}
                  </mat-option>
                  <mat-option value="e">
                    {{lootTables.staticValues.e}}
                  </mat-option>
                  <mat-option value="f">
                    {{lootTables.staticValues.f}}
                  </mat-option>
                  <mat-option value="g">
                    {{lootTables.staticValues.g}}
                  </mat-option>
                  <mat-option value="h">
                    {{lootTables.staticValues.h}}
                  </mat-option>
                  <mat-option value="i">
                    {{lootTables.staticValues.i}}
                  </mat-option>
                  <mat-option value="j">
                    {{lootTables.staticValues.j}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>

          <div class="lair-loot-category-shell">
            <h3>Potions, Scrolls, Alm Scripts</h3>
            <div>
              <br />
              <mat-form-field>
                <mat-label>Potions</mat-label>
                <mat-select [value]="beast.lairloot.potion"
                  (selectionChange)="captureSelectForObject($event, 'potion', 'lairloot')">
                  <mat-option>
                    None
                  </mat-option>
                  <mat-option value="a">
                    {{lootTables.numberAppearing.a}}
                  </mat-option>
                  <mat-option value="b">
                    {{lootTables.numberAppearing.b}}
                  </mat-option>
                  <mat-option value="c">
                    {{lootTables.numberAppearing.c}}
                  </mat-option>
                  <mat-option value="d">
                    {{lootTables.numberAppearing.d}}
                  </mat-option>
                  <mat-option value="e">
                    {{lootTables.numberAppearing.e}}
                  </mat-option>
                  <mat-option value="f">
                    {{lootTables.numberAppearing.f}}
                  </mat-option>
                  <mat-option value="g">
                    {{lootTables.numberAppearing.g}}
                  </mat-option>
                  <mat-option value="h">
                    {{lootTables.numberAppearing.h}}
                  </mat-option>
                  <mat-option value="i">
                    {{lootTables.numberAppearing.i}}
                  </mat-option>
                  <mat-option value="j">
                    {{lootTables.numberAppearing.j}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <div class="divider white"></div>

              <table class="first-column-left">
                <thead>
                  <th colspan="3">Scrolls</th>
                </thead>
                <tr>
                  <th>Number</th>
                  <th>Power (SP)</th>
                  <th></th>
                </tr>
                <tr *ngFor="let scroll of beast.lairloot.scrolls; let i = index"
                  [ngClass]="{'noDisplay': scroll.deleted }">
                  <td>{{lootTables.numberAppearing[scroll.number]}}</td>
                  <td>{{lootTables.scrollPower[scroll.power]}}</td>
                  <td><i (click)="removeScroll(i, 'lairloot')" class="fa-solid fa-trash"></i>
                  </td>
                </tr>
              </table>
              <div>
                <mat-form-field>
                  <mat-label>Number of Scrolls</mat-label>
                  <mat-select (selectionChange)="captureScroll($event, 'number')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.numberAppearing.a}}
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.numberAppearing.b}}
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.numberAppearing.c}}
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.numberAppearing.d}}
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.numberAppearing.e}}
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.numberAppearing.f}}
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.numberAppearing.g}}
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.numberAppearing.h}}
                    </mat-option>
                    <mat-option value="i">
                      {{lootTables.numberAppearing.i}}
                    </mat-option>
                    <mat-option value="j">
                      {{lootTables.numberAppearing.j}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Scroll Power Range</mat-label>
                  <mat-select (selectionChange)="captureScroll($event, 'power')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.scrollPower.a}} SP
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.scrollPower.b}} SP
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.scrollPower.c}} SP
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.scrollPower.d}} SP
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button mat-raised-button (click)="captureAddScroll('lairloot')" color="accent"
                [disabled]="!scroll.number || !scroll.power"><i class="fa-solid fa-plus"></i></button>

              <div class="divider white"></div>

              <table class="first-column-left">
                <thead>
                  <th colspan="3">Alm Scripts</th>
                </thead>
                <tr>
                  <th>Number</th>
                  <th>Favor</th>
                  <th></th>
                </tr>
                <tr *ngFor="let alm of beast.lairloot.alms; let i = index" [ngClass]="{'noDisplay': alm.deleted }">
                  <td>{{lootTables.numberAppearing[alm.number]}}</td>
                  <td>{{lootTables.almsFavor[alm.favor]}}</td>
                  <td><i (click)="removeAlm(i, 'lairloot')" class="fa-solid fa-trash"></i>
                  </td>
                </tr>
              </table>
              <div>
                <mat-form-field>
                  <mat-label>Number of Alm Scripts</mat-label>
                  <mat-select (selectionChange)="captureAlm($event, 'number')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.numberAppearing.a}}
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.numberAppearing.b}}
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.numberAppearing.c}}
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.numberAppearing.d}}
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.numberAppearing.e}}
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.numberAppearing.f}}
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.numberAppearing.g}}
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.numberAppearing.h}}
                    </mat-option>
                    <mat-option value="i">
                      {{lootTables.numberAppearing.i}}
                    </mat-option>
                    <mat-option value="j">
                      {{lootTables.numberAppearing.j}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Alm Script Favor Range</mat-label>
                  <mat-select (selectionChange)="captureAlm($event, 'favor')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.almsFavor.a}}
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.almsFavor.b}}
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.almsFavor.c}}
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.almsFavor.d}}
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.almsFavor.e}}
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.almsFavor.f}}
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.almsFavor.g}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button mat-raised-button (click)="captureAddAlm('lairloot')" color="accent"
                [disabled]="!alm.number || !alm.favor"><i class="fa-solid fa-plus"></i></button>
            </div>
          </div>


          <div class="lair-loot-category-shell">
            <h3>Equipment</h3>
            <br />
            <div>
              <table class="first-column-left">
                <thead>
                  <th colspan="3">Mundane Equipment</th>
                </thead>
                <tr>
                  <th>Value</th>
                  <th>Number (sc)</th>
                  <th></th>
                </tr>
                <tr *ngFor="let equipment of beast.lairloot.equipment; let i = index"
                  [ngClass]="{'noDisplay': equipment.deleted }">
                  <td>{{lootTables.staticValues[equipment.value]}}</td>
                  <td>{{lootTables.numberAppearing[equipment.number]}}</td>
                  <td><i (click)="removeEqupment(i, 'lairloot')" class="fa-solid fa-trash"></i>
                  </td>
                </tr>
              </table>
              <div>
                <mat-form-field>
                  <mat-label>Equipment Value</mat-label>
                  <mat-select (selectionChange)="captureEquipment($event, 'value')">
                    <mat-option>
                      No Value
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.staticValues.a}} sc
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.staticValues.b}} sc
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.staticValues.c}} sc
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.staticValues.d}} sc
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.staticValues.e}} sc
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.staticValues.f}} sc
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.staticValues.g}} sc
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.staticValues.h}} sc
                    </mat-option>
                    <mat-option value="i">
                      {{lootTables.staticValues.i}} sc
                    </mat-option>
                    <mat-option value="j">
                      {{lootTables.staticValues.j}} sc
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Equipment Number</mat-label>
                  <mat-select (selectionChange)="captureEquipment($event, 'number')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.numberAppearing.a}}
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.numberAppearing.b}}
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.numberAppearing.c}}
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.numberAppearing.d}}
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.numberAppearing.e}}
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.numberAppearing.f}}
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.numberAppearing.g}}
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.numberAppearing.h}}
                    </mat-option>
                    <mat-option value="i">
                      {{lootTables.numberAppearing.i}}
                    </mat-option>
                    <mat-option value="j">
                      {{lootTables.numberAppearing.j}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button mat-raised-button (click)="captureAddEquipment('lairloot')" color="accent"
                [disabled]="!equipment.value || !equipment.number"><i class="fa-solid fa-plus"></i></button>

              <div class="divider white"></div>

              <table class="first-column-left">
                <thead>
                  <th colspan="3">Superior Equipment</th>
                </thead>
                <tr>
                  <th>Value</th>
                  <th>Value (sc)</th>
                  <th></th>
                </tr>
                <tr *ngFor="let traited of beast.lairloot.traited; let i = index"
                  [ngClass]="{'noDisplay': traited.deleted }">
                  <td>{{lootTables.traitedChance[traited.chancetable]}}</td>
                  <td>{{lootTables.staticValues[traited.value]}}</td>
                  <td><i (click)="removeTraited(i, 'lairloot')" class="fa-solid fa-trash"></i>
                  </td>
                </tr>
              </table>
              <div>
                <mat-form-field>
                  <mat-label>Superior Equipment Value</mat-label>
                  <mat-select (selectionChange)="captureTraited($event, 'value')">
                    <mat-option>
                      No Value
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.staticValues.a}} sc
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.staticValues.b}} sc
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.staticValues.c}} sc
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.staticValues.d}} sc
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.staticValues.e}} sc
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.staticValues.f}} sc
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.staticValues.g}} sc
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.staticValues.h}} sc
                    </mat-option>
                    <mat-option value="i">
                      {{lootTables.staticValues.i}} sc
                    </mat-option>
                    <mat-option value="j">
                      {{lootTables.staticValues.j}} sc
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Superior Equipment Chance Table</mat-label>
                  <mat-select (selectionChange)="captureTraited($event, 'chancetable')">
                    <mat-option>
                      None
                    </mat-option>
                    <mat-option value="a">
                      {{lootTables.traitedChance.a}}
                    </mat-option>
                    <mat-option value="b">
                      {{lootTables.traitedChance.b}}
                    </mat-option>
                    <mat-option value="c">
                      {{lootTables.traitedChance.c}}
                    </mat-option>
                    <mat-option value="d">
                      {{lootTables.traitedChance.d}}
                    </mat-option>
                    <mat-option value="e">
                      {{lootTables.traitedChance.e}}
                    </mat-option>
                    <mat-option value="f">
                      {{lootTables.traitedChance.f}}
                    </mat-option>
                    <mat-option value="g">
                      {{lootTables.traitedChance.g}}
                    </mat-option>
                    <mat-option value="h">
                      {{lootTables.traitedChance.h}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button mat-raised-button (click)="captureAddTraited('lairloot')" color="accent"
                [disabled]="!traited.value || !traited.chancetable"><i class="fa-solid fa-plus"></i></button>
            </div>
          </div>

          <div class="lair-loot-category-shell">
            <h3>Woundrous Items</h3>
            <div class="loot-inner-shell">
              <mat-form-field>
                <mat-label>Relic Chance</mat-label>
                <mat-select [value]="beast.lairloot.relic"
                  (selectionChange)="captureSelectForObject($event, 'relic', 'lairloot')">
                  <mat-option>
                    No Chance of Either
                  </mat-option>
                  <mat-option value="a">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.a)}}
                  </mat-option>
                  <mat-option value="b">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.b)}}
                  </mat-option>
                  <mat-option value="c">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.c)}}
                  </mat-option>
                  <mat-option value="d">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.d)}}
                  </mat-option>
                  <mat-option value="e">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.e)}}
                  </mat-option>
                  <mat-option value="f">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.f)}}
                  </mat-option>
                  <mat-option value="g">
                    {{formatRelicAndEnchantedChange(lootTables.relicTable.g)}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field>
                <mat-label>Enchanted Item Chance</mat-label>
                <mat-select [value]="beast.lairloot.enchanted"
                  (selectionChange)="captureSelectForObject($event, 'enchanted', 'lairloot')">
                  <mat-option>
                    No Chance of Either
                  </mat-option>
                  <mat-option value="a">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.a)}}
                  </mat-option>
                  <mat-option value="b">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.b)}}
                  </mat-option>
                  <mat-option value="c">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.c)}}
                  </mat-option>
                  <mat-option value="d">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.d)}}
                  </mat-option>
                  <mat-option value="e">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.e)}}
                  </mat-option>
                  <mat-option value="f">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.f)}}
                  </mat-option>
                  <mat-option value="g">
                    {{formatRelicAndEnchantedChange(lootTables.enchantedTable.g)}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="The Weird">
      <h2>Weird Pleroma</h2>
      <div class="divider"></div>
      <div *ngFor="let regeant of beast.reagents; let i = index">
        <div *ngIf="!regeant.deleted" class="reagent-single-shell">
          <mat-form-field>
            <input placeholder="Body Part" matInput [value]="regeant.name"
              (change)="captureInput($event, 'reagents', i, 'name')">
          </mat-form-field>
          <mat-form-field>
            <input placeholder="Spell" matInput [value]="regeant.spell"
              (change)="captureInput($event, 'reagents', i, 'spell')">
          </mat-form-field>
          <mat-form-field>
            <mat-label>Identification</mat-label>
            <mat-select (selectionChange)="captureEncounterSecondary($event, 'reagents', i, 'difficulty')"
              [value]="regeant.difficulty">
              <mat-option value="Depends">
                Depends
              </mat-option>
              <mat-option value="n/a">
                n/a
              </mat-option>
              <mat-option value="0">
                0
              </mat-option>
              <mat-option value="d4!">
                d4!
              </mat-option>
              <mat-option value="d6!">
                d6!
              </mat-option>
              <mat-option value="d8!">
                d8!
              </mat-option>
              <mat-option value="d10!">
                d10!
              </mat-option>
              <mat-option value="d12!">
                d12!
              </mat-option>
              <mat-option value="d20!">
                d20!
              </mat-option>
              <mat-option value="d20!+d4!">
                d20!+d4!
              </mat-option>
              <mat-option value="5d20!">
                d20!+d4!
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field>
            <mat-label>Harvest</mat-label>
            <mat-select (selectionChange)="captureEncounterSecondary($event, 'reagents', i, 'harvest')"
              [value]="regeant.harvest">
              <mat-option>
                Same as Harvest
              </mat-option>
              <mat-option value="Depends">
                Depends
              </mat-option>
              <mat-option value="n/a">
                n/a
              </mat-option>
              <mat-option value="0">
                0
              </mat-option>
              <mat-option value="d4!">
                d4!
              </mat-option>
              <mat-option value="d6!">
                d6!
              </mat-option>
              <mat-option value="d8!">
                d8!
              </mat-option>
              <mat-option value="d10!">
                d10!
              </mat-option>
              <mat-option value="d12!">
                d12!
              </mat-option>
              <mat-option value="d20!">
                d20!
              </mat-option>
              <mat-option value="d20!+d4!">
                d20!+d4!
              </mat-option>
              <mat-option value="5d20!">
                d20!+d4!
              </mat-option>
            </mat-select>
          </mat-form-field>
          <button mat-raised-button (click)="removeNewSecondaryItem('reagents', i)" color="warn"><i
              class="fa-solid fa-trash"></i></button>
        </div>
      </div>

      <button mat-raised-button (click)="addNewSecondaryItem('reagents')" color="accent"><i
          class="fa-solid fa-plus"></i></button>

      <!-- <h2>Special Harvest</h2> -->

      <br>
      <br>
      <br>

      <h2>Weirdshaping</h2>
      <div class="divider"></div>
      <div class="tab-wrapper">
        <app-weird-shaping-edit [casting]="beast.casting" [spells]="beast.spells"
          [checkWeirdshapeType]="checkWeirdshapeType" [deleteSpell]="deleteSpell" [addNewSpell]="addNewSpell"
          [captureSpellHTML]="captureSpellHTML" [captureSpellInput]="captureSpellInput" [changeDefaultType]="changeDefaultType"
          [captureSpellSelect]="captureSpellSelect" [captureSpellDie]="captureSpellDie" [addToAllRoles]="addToAllRoles"
          [selectedRoleId]="selectedRoleId"></app-weird-shaping-edit>
      </div>
    </mat-tab>
    <mat-tab label="General Information">
      <ng-template matTabContent>
        <div class="tab-wrapper">
          <h2>Type</h2>
          <div class="divider"></div>
          <div class="chip-shell box-padding">
            <mat-chip-list>
              <div *ngFor="let type of beast.types; let i = index">
                <mat-chip *ngIf="!type.deleted" (click)="removeNewSecondaryItem('types', i)" color="warn" selected>
                  {{type.typeid | typeConverter}}</mat-chip>
              </div>
            </mat-chip-list>
            <mat-form-field>
              <mat-label>Select New Type</mat-label>
              <mat-select (selectionChange)="captureChip($event, 'types')">
                <mat-option value="1">
                  Demon
                </mat-option>
                <mat-option value="2">
                  Undead, Corporeal
                </mat-option>
                <mat-option value="3">
                  Undead, Incorporeal
                </mat-option>
                <mat-option value="4">
                  Elemental
                </mat-option>
                <mat-option value="5">
                  Natural Creature
                </mat-option>
                <mat-option value="6">
                  Weird Creature
                </mat-option>
                <mat-option value="7">
                  Humanoid
                </mat-option>
                <mat-option value="8">
                  Intelligent Evil
                </mat-option>
                <mat-option value="9">
                  Goblin
                </mat-option>
                <mat-option value="10">
                  Swarm
                </mat-option>
                <mat-option value="11">
                  Flora
                </mat-option>
                <mat-option value="12">
                  Aos Sidhe
                </mat-option>
                <mat-option value="13">
                  Spirit
                </mat-option>
                <mat-option value="14">
                  Eldritch
                </mat-option>
                <mat-option value="16">
                  Insectoid
                </mat-option>
                <mat-option value="15">
                  Template
                </mat-option>
              </mat-select>
            </mat-form-field>
            <button mat-raised-button color="accent" (click)="addChip('types')">Add Type</button>
          </div>
          <!-- list of types that link to search with that type as a parameter -->

          <h2>Misc Information</h2>
          <div class="divider"></div>
          <div class="box-padding">

            <div>
              <mat-form-field>
                <mat-label>Size</mat-label>
                <mat-select [value]="selectedRoleId ? beast.roleInfo[selectedRoleId].size : beast.size"
                  (selectionChange)="captureSelectWithRoleConsideration($event, 'size')">
                  <mat-option value="Fine">
                    Fine
                  </mat-option>
                  <mat-option value="Diminutive">
                    Diminutive
                  </mat-option>
                  <mat-option value="Tiny">
                    Tiny
                  </mat-option>
                  <mat-option value="Small">
                    Small
                  </mat-option>
                  <mat-option value="Medium">
                    Medium
                  </mat-option>
                  <mat-option value="Large">
                    Large
                  </mat-option>
                  <mat-option value="Huge">
                    Huge
                  </mat-option>
                  <mat-option value="Giant">
                    Giant
                  </mat-option>
                  <mat-option value="Enormous">
                    Enormous
                  </mat-option>
                  <mat-option value="Colossal">
                    Colossal
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-checkbox *ngIf="selectedRoleId"
                [matTooltipDisabled]="!(selectedRoleId && beast.roleInfo[selectedRoleId].size === beast.size)"
                matTooltip="To set a new default, go to another Role"
                [disabled]="selectedRoleId && beast.roleInfo[selectedRoleId].size === beast.size"
                [checked]="selectedRoleId && beast.roleInfo[selectedRoleId].size === beast.size"
                (change)="updateDefaultSize()">Default Size</mat-checkbox>
            </div>

            <mat-form-field>
              <input placeholder="Senses" matInput [value]="beast.senses" (change)="captureInput($event, 'senses')">
            </mat-form-field>

            <h3>Environment</h3>
            <div class="chip-shell">
              <mat-chip-list>
                <div *ngFor="let environ of beast.environ; let i = index">
                  <mat-chip *ngIf="!environ.deleted" (click)="removeNewSecondaryItem('environ', i)" color="warn"
                    selected>
                    {{environ.environid | environConverter}}
                  </mat-chip>
                </div>
              </mat-chip-list>
              <mat-form-field>
                <mat-label>Select New Environ</mat-label>
                <mat-select (selectionChange)="captureChip($event, 'environ')">
                  <mat-option value="1">
                    Dungeon/Ruins
                  </mat-option>
                  <mat-option value="2">
                    Wilderness
                  </mat-option>
                  <mat-option value="3">
                    Forest
                  </mat-option>
                  <mat-option value="4">
                    Castle
                  </mat-option>
                  <mat-option value="5">
                    Cave/Underground
                  </mat-option>
                  <mat-option value="6">
                    Mountain
                  </mat-option>
                  <mat-option value="7">
                    Plains
                  </mat-option>
                  <mat-option value="8">
                    Swamp
                  </mat-option>
                  <mat-option value="9">
                    Urban
                  </mat-option>
                  <mat-option value="10">
                    Ship
                  </mat-option>
                  <mat-option value="11">
                    Coastal
                  </mat-option>
                  <mat-option value="12">
                    Aquatic
                  </mat-option>
                  <mat-option value="13">
                    Other
                  </mat-option>
                  <mat-option value="14">
                    Desert
                  </mat-option>
                  <mat-option value="15">
                    Island
                  </mat-option>
                  <mat-option value="16">
                    Jungle
                  </mat-option>
                  <mat-option value="17">
                    Sewer
                  </mat-option>
                  <mat-option value="18">
                    House
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <br>
              <button mat-raised-button color="accent" (click)="addChip('environ')">Add Environment</button>
            </div>

            <mat-form-field>
              <input matInput placeholder="Diet" [value]="beast.diet" (change)="captureInput($event, 'diet')"
                maxlength="40">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Rarity</mat-label>
              <mat-select [(value)]="'' + beast.rarity" (selectionChange)="captureSelect($event, 'rarity')">
                <mat-option value="10">
                  Common
                </mat-option>
                <mat-option value="5">
                  Uncommon
                </mat-option>
                <mat-option value="3">
                  Rare
                </mat-option>
                <mat-option value="1">
                  Legendary
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <h2>Variants</h2>
          <div class="divider"></div>
          <mat-chip-list>
            <div *ngFor="let variant of beast.variants; let i = index">
              <mat-chip *ngIf="!variant.deleted" (click)="removeNewSecondaryItem('variants', i)" color="warn" selected>
                {{variant.variantid}}</mat-chip>
            </div>
          </mat-chip-list>
          <mat-form-field>
            <input matInput placeholder="Monster ID" [value]="newVariantId" (change)="captureID($event)">
          </mat-form-field>
          <br>
          <button mat-raised-button color="accent" (click)="addById()">Add By ID</button>
        </div>

        <h2>Meta Notes</h2>
        <div class="divider"></div>
        <div>
          <quill-editor [(ngModel)]="beast.meta" (onContentChanged)="captureHTML($event, 'meta')"></quill-editor>
        </div>
      </ng-template>
    </mat-tab>
  </mat-tab-group>

  <br>
  <div class="divider"></div>
  <br>

  <button (click)="saveChanges()" mat-raised-button color="primary">Save</button>
  <button (click)="deleteThisBeast()" mat-raised-button color="warn" class="deleteButton">Delete Monster</button>
</mat-card>